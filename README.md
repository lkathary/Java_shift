# Java_shift

**Тестовое задание (см. [Java_TestTask.pdf](Java_TestTask.pdf))**

---

1. Приложение разработано на языке Java версии 17.


2. Использовалась система сборки apache-maven-3.9.9.


3. Использована библиотека аннотаций Lombok:
   ```
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <version>1.18.36</version>
   ```
4. Использована библиотека для разбора параметров командной строки JCommander:
   ```
    <groupId>com.beust</groupId>
    <artifactId>jcommander</artifactId>
    <version>1.82</version>
   ```

5. В случае передачи утилите некорректных параметров командной строки, либо запуск без параметров, утилита выводит предусмотренный шаблон параметров и завершает работу:

   ```
      Usage: java -jar util.jar [options] files
      Options:
      -o
      Path for results
      -p
      Output filenames prefix
      -a
      Append mode for output files
      Default: false
      -s
      Get short statistics
      Default: false
      -f
      Get full statistics
      Default: false
   ```
   где:

   -o задает абсолютный или относительный путь для папки с файлами результатов (например `-o c:/result` или `-o file/results/`). При этом утилита **не создает** целевую папку результатов, т.е. если папка отсутствует или путь для выходных файлов некорректен, утилита обрабатывает ошибку, выводит сообщение и завершает работу с кодом 1;
      
   -p задет префикс выходных файлов результатов. По умолчанию результаты работы утилиты сохраняются в файлы *integers.txt, floats.txt, strings.txt*.  Использование опции
      `-p pre_` задаст вывод в файлы *pre_integers.txt, pre_floats.txt, pre_strings.txt*;
      
   -a задает режим добавления в существующие файлы результатов;
   
   -s выводит краткую статистику количество элементов записанных в соответствующие файлы результатов;
   
   -f выводит полную статистику элементов записанных в соответствующие файлы результатов. Т.е. помимо краткой статистики дополнительно для чисел выводятся: сумма минимальное, максимальное и среднее значение элементов. Для строк: минимальная и максимальная длины обработанных строк.


Опции -s и -f взаимоисключающие. При указании обеих опций утилита обработает ошибку и завершит работу с кодом 2.
Если утилита запускается без какой-либо опции статистики (-s или -f), утилита работает в ***“quiet mode”*** (тихом режиме), т.е. отсутствует вывод в терминал кроме возможного возникновения ошибок.

Опции утилиты можно указывать в произвольном порядке.

Все другие отличные от вышеперечисленных опций «токены» (наборы символов, разделенные пробелами) командной строки воспринимаются утилитой, как список файлов для обработки. Порядок обработки файлов соответствует порядку имен файлов, указанных в командной строке. Т.е. команда:
**java -jar util.jar in1.txt -f -v in2.txt**
будет обрабатывать список файлов: *in1.txt, -v, in2.txt*.

Если указанные в командной строке файл не найден (не может быть открыт на чтение), утилита обрабатывает ошибку и завершает работу с кодом 1. 

6. Особенности реализации:

Обрабатываемые утилитой файлы, заданные в командной строке, не считываются в память полностью – обработка ведётся построчно, что позволяет работать с файлами большого размера.

 
Так как тестовое задание не накладывает ограничение на «размерность» целых и вещественных чисел входных данных, то текущая цепочка фильтрации «выстроена» как:
    ```
    input data => BigInteger -> Double -> String => output data
    ```
    Если конкретизировать «размерность» целых и вещественных чисел входных данных, то с целью увеличения производительности стоит «перестроить» цепочку фильтрации, например:
    ```
    input data => Integer -> Float -> String => output data
    ```

Соответствующие реализации классов для фильтрации и сбора статистики для типов (***Integer, Long, Float***) присутствует в проекте.


Утилита обрабатывает текстовые файлы в различных кодировках. Кодировкой по умолчанию является UTF-8. Чтобы обработка входных файлов велась в иной кодировке (например ANSI), необходимо установить константу соответствующей кодировки:

   ```
      private final Charset CHAR_SET = StandardCharsets.UTF_8;        // UTF-8
         //    private final Charset CHAR_SET = StandardCharsets.ISO_8859_1; // ANSI
   ```

7. Сборка исполняемого jar архива (util.jar) со всеми зависимостями осуществляется с помощью
   `Apache maven-shade-plugin` версии 3.6.0 - фаза **package maven**.


8. Проект собирался в **IDEA** IDE, для сборки из командной строки предусмотрен **Makefile** с целями
   `build` и `run`. Для сборки проекта используется `maven-wrapper`.


9. Пример запуска утилиты:
   ```
   java -jar util.jar -f -p sample- in1.txt in2.txt
   ```
